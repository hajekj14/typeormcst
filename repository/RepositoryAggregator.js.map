{"version":3,"sources":["../../src/repository/RepositoryAggregator.ts"],"names":[],"mappings":";;AAMA,yDAAsD;AACtD,0CAA8C;AAE9C;;GAEG;AACH;IA0BI,4EAA4E;IAC5E,cAAc;IACd,4EAA4E;IAE5E,8BAAY,UAAsB,EAAE,QAAwB,EAAE,mBAAyC;QACnG,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzB,IAAM,OAAO,GAAG,4BAAgB,CAAC,qCAAiB,CAAC,CAAC;QAEpD,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC;YAC3B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,oBAAoB,CAAC,UAAU,EAAE,QAAQ,EAAE,mBAAmB,CAAC,CAAC;QACpH,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,gBAAgB,CAAC,UAAU,EAAE,QAAQ,EAAE,mBAAmB,CAAC,CAAC;QAC1F,CAAC;QAED,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,wBAAwB,CAAC,UAAU,EAAE,QAAQ,EAAE,mBAAmB,CAAC,CAAC;IAC1G,CAAC;IAEL,2BAAC;AAAD,CA5CA,AA4CC,IAAA;AA5CY,oDAAoB","file":"RepositoryAggregator.js","sourcesContent":["import {Repository} from \"./Repository\";\r\nimport {EntityMetadata} from \"../metadata/EntityMetadata\";\r\nimport {SpecificRepository} from \"./SpecificRepository\";\r\nimport {Connection} from \"../connection/Connection\";\r\nimport {TreeRepository} from \"./TreeRepository\";\r\nimport {QueryRunnerProvider} from \"../query-runner/QueryRunnerProvider\";\r\nimport {RepositoryFactory} from \"./RepositoryFactory\";\r\nimport {getFromContainer} from \"../container\";\r\n\r\n/**\r\n * Aggregates all repositories of the specific metadata.\r\n */\r\nexport class RepositoryAggregator {\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Public Readonly properties\r\n    // -------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Entity metadata which owns repositories.\r\n     */\r\n    public readonly metadata: EntityMetadata;\r\n\r\n    /**\r\n     * Ordinary repository.\r\n     */\r\n    public readonly repository: Repository<any>;\r\n\r\n    /**\r\n     * Tree repository.\r\n     */\r\n    public readonly treeRepository?: TreeRepository<any>;\r\n\r\n    /**\r\n     * Repository with specific functions.\r\n     */\r\n    public readonly specificRepository: SpecificRepository<any>;\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Constructor\r\n    // -------------------------------------------------------------------------\r\n\r\n    constructor(connection: Connection, metadata: EntityMetadata, queryRunnerProvider?: QueryRunnerProvider) {\r\n        this.metadata = metadata;\r\n\r\n        const factory = getFromContainer(RepositoryFactory);\r\n\r\n        if (metadata.table.isClosure) {\r\n            this.repository = this.treeRepository = factory.createTreeRepository(connection, metadata, queryRunnerProvider);\r\n        } else {\r\n            this.repository = factory.createRepository(connection, metadata, queryRunnerProvider);\r\n        }\r\n\r\n        this.specificRepository = factory.createSpecificRepository(connection, metadata, queryRunnerProvider);\r\n    }\r\n\r\n}"],"sourceRoot":".."}